<?xml version="1.0" encoding="UTF-8"?>
<mxfile host="app.diagrams.net" modified="2026-01-10T18:00:00.000Z" agent="WS-Tracker" version="21.0.0">
  <diagram name="WS-Tracker User Flow" id="user-flow-diagram">
    <mxGraphModel dx="2400" dy="1400" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="2800" pageHeight="1600" background="#FFFFFF">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />

        <!-- ==================== SWIMLANES ==================== -->

        <!-- Swimlane: sudo_admin -->
        <mxCell id="swimlane-sudo" value="SUDO ADMIN" style="swimlane;startSize=30;horizontal=1;fillColor=#1882C5;fontColor=#FFFFFF;fontStyle=1;swimlaneFillColor=#F5F5F5;" vertex="1" parent="1">
          <mxGeometry x="40" y="60" width="1200" height="130" as="geometry" />
        </mxCell>

        <!-- Swimlane: admin -->
        <mxCell id="swimlane-admin" value="ADMIN" style="swimlane;startSize=30;horizontal=1;fillColor=#28317E;fontColor=#FFFFFF;fontStyle=1;swimlaneFillColor=#F5F5F5;" vertex="1" parent="1">
          <mxGeometry x="40" y="200" width="1200" height="360" as="geometry" />
        </mxCell>

        <!-- Swimlane: planner/gf -->
        <mxCell id="swimlane-planner" value="PLANNER / GENERAL FOREMAN" style="swimlane;startSize=30;horizontal=1;fillColor=#E27434;fontColor=#FFFFFF;fontStyle=1;swimlaneFillColor=#F5F5F5;" vertex="1" parent="1">
          <mxGeometry x="40" y="570" width="1200" height="200" as="geometry" />
        </mxCell>

        <!-- Swimlane: system -->
        <mxCell id="swimlane-system" value="SYSTEM (Background)" style="swimlane;startSize=30;horizontal=1;fillColor=#666666;fontColor=#FFFFFF;fontStyle=1;swimlaneFillColor=#EEEEEE;" vertex="1" parent="1">
          <mxGeometry x="40" y="780" width="2400" height="300" as="geometry" />
        </mxCell>

        <!-- ==================== AUTHENTICATION FLOW ==================== -->

        <!-- Start: User Accesses App -->
        <mxCell id="auth-start" value="User Accesses&#xa;WS-Tracker" style="ellipse;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontStyle=1;" vertex="1" parent="swimlane-planner">
          <mxGeometry x="40" y="50" width="100" height="70" as="geometry" />
        </mxCell>

        <!-- Decision: Authenticated? -->
        <mxCell id="auth-check" value="Session&#xa;Valid?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="swimlane-planner">
          <mxGeometry x="170" y="45" width="90" height="80" as="geometry" />
        </mxCell>

        <!-- Process: Login Form -->
        <mxCell id="auth-login" value="Display&#xa;Login Form&#xa;(Fortify)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="swimlane-planner">
          <mxGeometry x="170" y="140" width="100" height="50" as="geometry" />
        </mxCell>

        <!-- Process: Validate Credentials -->
        <mxCell id="auth-validate" value="Validate&#xa;Credentials" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="swimlane-planner">
          <mxGeometry x="300" y="140" width="100" height="50" as="geometry" />
        </mxCell>

        <!-- Decision: 2FA Required? -->
        <mxCell id="auth-2fa-check" value="2FA&#xa;Enabled?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="swimlane-planner">
          <mxGeometry x="430" y="130" width="80" height="60" as="geometry" />
        </mxCell>

        <!-- Process: 2FA Challenge -->
        <mxCell id="auth-2fa" value="2FA&#xa;Challenge" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="swimlane-planner">
          <mxGeometry x="540" y="140" width="90" height="50" as="geometry" />
        </mxCell>

        <!-- Process: Redirect to Dashboard -->
        <mxCell id="auth-redirect" value="Redirect to&#xa;Dashboard" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="swimlane-planner">
          <mxGeometry x="660" y="50" width="100" height="50" as="geometry" />
        </mxCell>

        <!-- Decision: First Login? (WS Credentials) -->
        <mxCell id="auth-ws-check" value="WS Creds&#xa;Setup?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="swimlane-planner">
          <mxGeometry x="790" y="45" width="80" height="60" as="geometry" />
        </mxCell>

        <!-- Process: WS Credential Prompt -->
        <mxCell id="auth-ws-prompt" value="Prompt WS&#xa;Credential&#xa;Setup" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="swimlane-planner">
          <mxGeometry x="900" y="45" width="90" height="60" as="geometry" />
        </mxCell>

        <!-- End: Dashboard Ready -->
        <mxCell id="auth-end" value="Dashboard&#xa;Ready" style="ellipse;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontStyle=1;" vertex="1" parent="swimlane-planner">
          <mxGeometry x="1020" y="45" width="90" height="60" as="geometry" />
        </mxCell>

        <!-- Authentication Flow Connectors -->
        <mxCell id="conn-auth-1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="swimlane-planner" source="auth-start" target="auth-check">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="conn-auth-2a" value="No" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="swimlane-planner" source="auth-check" target="auth-login">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="conn-auth-2b" value="Yes" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="swimlane-planner" source="auth-check" target="auth-redirect">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="conn-auth-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="swimlane-planner" source="auth-login" target="auth-validate">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="conn-auth-4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="swimlane-planner" source="auth-validate" target="auth-2fa-check">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="conn-auth-5a" value="Yes" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="swimlane-planner" source="auth-2fa-check" target="auth-2fa">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="conn-auth-5b" value="No" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="swimlane-planner" source="auth-2fa-check" target="auth-redirect">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="470" y="85" />
            </Array>
          </mxGeometry>
        </mxCell>

        <mxCell id="conn-auth-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="swimlane-planner" source="auth-2fa" target="auth-redirect">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="585" y="85" />
            </Array>
          </mxGeometry>
        </mxCell>

        <mxCell id="conn-auth-7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="swimlane-planner" source="auth-redirect" target="auth-ws-check">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="conn-auth-8a" value="No" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="swimlane-planner" source="auth-ws-check" target="auth-ws-prompt">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="conn-auth-8b" value="Yes" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="swimlane-planner" source="auth-ws-check" target="auth-end">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="830" y="30" />
              <mxPoint x="1065" y="30" />
            </Array>
          </mxGeometry>
        </mxCell>

        <mxCell id="conn-auth-9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="swimlane-planner" source="auth-ws-prompt" target="auth-end">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- ==================== MAIN DASHBOARD FLOW ==================== -->

        <!-- Process: View Dashboard (All Users) -->
        <mxCell id="dash-view" value="View Circuit&#xa;Dashboard" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="swimlane-admin">
          <mxGeometry x="60" y="150" width="100" height="60" as="geometry" />
        </mxCell>

        <!-- Process: Apply Filters -->
        <mxCell id="dash-filter" value="Apply Filters&#xa;(Region, Planner,&#xa;Date)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="swimlane-admin">
          <mxGeometry x="200" y="150" width="110" height="60" as="geometry" />
        </mxCell>

        <!-- Process: View Circuit Details -->
        <mxCell id="dash-details" value="View Circuit&#xa;Details&#xa;(Click Card)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="swimlane-admin">
          <mxGeometry x="350" y="150" width="100" height="60" as="geometry" />
        </mxCell>

        <!-- Process: Expand Split Assessments -->
        <mxCell id="dash-expand" value="Expand Split&#xa;Assessments" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="swimlane-admin">
          <mxGeometry x="490" y="150" width="100" height="60" as="geometry" />
        </mxCell>

        <!-- Process: Drag Circuit (Admin Only) -->
        <mxCell id="dash-drag" value="Drag Circuit&#xa;to New&#xa;Workflow Stage" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="swimlane-admin">
          <mxGeometry x="630" y="150" width="110" height="60" as="geometry" />
        </mxCell>

        <!-- Decision: Valid Stage Change? -->
        <mxCell id="dash-valid" value="Valid&#xa;Transition?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="swimlane-admin">
          <mxGeometry x="780" y="145" width="80" height="70" as="geometry" />
        </mxCell>

        <!-- Process: Update UI State -->
        <mxCell id="dash-update" value="Update&#xa;circuit_ui_states&#xa;Table" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="swimlane-admin">
          <mxGeometry x="900" y="150" width="110" height="60" as="geometry" />
        </mxCell>

        <!-- Process: Create Snapshot -->
        <mxCell id="dash-snapshot" value="Create&#xa;Status Change&#xa;Snapshot" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="swimlane-admin">
          <mxGeometry x="1050" y="150" width="100" height="60" as="geometry" />
        </mxCell>

        <!-- Process: View Planned Units -->
        <mxCell id="dash-units" value="View Planned&#xa;Units&#xa;Breakdown" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="swimlane-admin">
          <mxGeometry x="350" y="260" width="100" height="60" as="geometry" />
        </mxCell>

        <!-- Process: View Permission Status -->
        <mxCell id="dash-perm" value="View Permission&#xa;Status&#xa;(Pie Chart)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="swimlane-admin">
          <mxGeometry x="490" y="260" width="100" height="60" as="geometry" />
        </mxCell>

        <!-- Dashboard Flow Connectors -->
        <mxCell id="conn-dash-1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="swimlane-admin" source="dash-view" target="dash-filter">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="conn-dash-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="swimlane-admin" source="dash-filter" target="dash-details">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="conn-dash-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="swimlane-admin" source="dash-details" target="dash-expand">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="conn-dash-4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="swimlane-admin" source="dash-expand" target="dash-drag">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="conn-dash-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="swimlane-admin" source="dash-drag" target="dash-valid">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="conn-dash-6a" value="Yes" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="swimlane-admin" source="dash-valid" target="dash-update">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="conn-dash-7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="swimlane-admin" source="dash-update" target="dash-snapshot">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="conn-dash-8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="swimlane-admin" source="dash-details" target="dash-units">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="conn-dash-9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="swimlane-admin" source="dash-units" target="dash-perm">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- ==================== FORCE SYNC (Sudo Admin) ==================== -->

        <!-- Process: Navigate to Admin Panel -->
        <mxCell id="sync-nav" value="Navigate to&#xa;Admin Panel" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="swimlane-sudo">
          <mxGeometry x="60" y="40" width="100" height="50" as="geometry" />
        </mxCell>

        <!-- Process: Select Statuses -->
        <mxCell id="sync-select" value="Select Status&#xa;Filters&#xa;(Checkboxes)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="swimlane-sudo">
          <mxGeometry x="200" y="35" width="110" height="60" as="geometry" />
        </mxCell>

        <!-- Process: Click Force Sync -->
        <mxCell id="sync-force" value="Click&#xa;Force Sync&#xa;Button" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="swimlane-sudo">
          <mxGeometry x="350" y="40" width="100" height="50" as="geometry" />
        </mxCell>

        <!-- Process: Dispatch Job -->
        <mxCell id="sync-dispatch" value="Dispatch&#xa;SyncCircuitsJob" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="swimlane-sudo">
          <mxGeometry x="490" y="40" width="110" height="50" as="geometry" />
        </mxCell>

        <!-- Process: Monitor Progress -->
        <mxCell id="sync-monitor" value="Monitor&#xa;Progress&#xa;(Real-time)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="swimlane-sudo">
          <mxGeometry x="640" y="35" width="100" height="60" as="geometry" />
        </mxCell>

        <!-- Process: View Sync History -->
        <mxCell id="sync-history" value="View Sync&#xa;History Log" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="swimlane-sudo">
          <mxGeometry x="780" y="40" width="100" height="50" as="geometry" />
        </mxCell>

        <!-- End: Sync Complete -->
        <mxCell id="sync-complete" value="Sync&#xa;Complete" style="ellipse;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontStyle=1;" vertex="1" parent="swimlane-sudo">
          <mxGeometry x="920" y="35" width="80" height="60" as="geometry" />
        </mxCell>

        <!-- Force Sync Connectors -->
        <mxCell id="conn-sync-1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="swimlane-sudo" source="sync-nav" target="sync-select">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="conn-sync-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="swimlane-sudo" source="sync-select" target="sync-force">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="conn-sync-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="swimlane-sudo" source="sync-force" target="sync-dispatch">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="conn-sync-4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="swimlane-sudo" source="sync-dispatch" target="sync-monitor">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="conn-sync-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="swimlane-sudo" source="sync-monitor" target="sync-history">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="conn-sync-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="swimlane-sudo" source="sync-history" target="sync-complete">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- ==================== LINK UNLINKED PLANNERS (Admin) ==================== -->

        <!-- Process: Navigate to Unlinked Planners -->
        <mxCell id="link-nav" value="Navigate to&#xa;Unlinked&#xa;Planners" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="swimlane-admin">
          <mxGeometry x="60" y="35" width="100" height="60" as="geometry" />
        </mxCell>

        <!-- Process: View Unlinked List -->
        <mxCell id="link-list" value="View List of&#xa;Unlinked API&#xa;Usernames" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="swimlane-admin">
          <mxGeometry x="200" y="35" width="110" height="60" as="geometry" />
        </mxCell>

        <!-- Process: Search User -->
        <mxCell id="link-search" value="Search Local&#xa;User Database" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="swimlane-admin">
          <mxGeometry x="350" y="35" width="100" height="60" as="geometry" />
        </mxCell>

        <!-- Process: Select User -->
        <mxCell id="link-select" value="Select User&#xa;to Link" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="swimlane-admin">
          <mxGeometry x="490" y="35" width="100" height="60" as="geometry" />
        </mxCell>

        <!-- Process: Confirm Link -->
        <mxCell id="link-confirm" value="Confirm&#xa;Link Action" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="swimlane-admin">
          <mxGeometry x="630" y="35" width="100" height="60" as="geometry" />
        </mxCell>

        <!-- Process: Update User -->
        <mxCell id="link-update" value="Update User&#xa;api_username&#xa;Column" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="swimlane-admin">
          <mxGeometry x="770" y="35" width="110" height="60" as="geometry" />
        </mxCell>

        <!-- Process: Remove from Unlinked -->
        <mxCell id="link-remove" value="Remove from&#xa;unlinked_planners&#xa;Table" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="swimlane-admin">
          <mxGeometry x="920" y="35" width="120" height="60" as="geometry" />
        </mxCell>

        <!-- End: Link Complete -->
        <mxCell id="link-complete" value="Planner&#xa;Linked" style="ellipse;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontStyle=1;" vertex="1" parent="swimlane-admin">
          <mxGeometry x="1080" y="30" width="90" height="70" as="geometry" />
        </mxCell>

        <!-- ==================== SYNC EVENT FLOW (System) ==================== -->

        <!-- Start: Scheduled Trigger -->
        <mxCell id="sys-trigger" value="Scheduled&#xa;Trigger&#xa;(4:30 AM/PM)" style="ellipse;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontStyle=1;" vertex="1" parent="swimlane-system">
          <mxGeometry x="60" y="110" width="110" height="70" as="geometry" />
        </mxCell>

        <!-- Process: Health Check -->
        <mxCell id="sys-health" value="WorkStudio&#xa;API&#xa;Health Check" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="swimlane-system">
          <mxGeometry x="210" y="115" width="100" height="60" as="geometry" />
        </mxCell>

        <!-- Decision: API Available? -->
        <mxCell id="sys-api-check" value="API&#xa;Available?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="swimlane-system">
          <mxGeometry x="350" y="105" width="100" height="80" as="geometry" />
        </mxCell>

        <!-- Process: Create Sync Log -->
        <mxCell id="sys-log-start" value="Create&#xa;SyncLog Entry&#xa;(started)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="swimlane-system">
          <mxGeometry x="490" y="110" width="110" height="70" as="geometry" />
        </mxCell>

        <!-- Loop: For Each Status -->
        <mxCell id="sys-loop" value="For Each Status&#xa;(ACTIV, QC,&#xa;REWRK, CLOSE)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontColor=#333333;dashed=1;" vertex="1" parent="swimlane-system">
          <mxGeometry x="640" y="35" width="120" height="70" as="geometry" />
        </mxCell>

        <!-- Process: API Call -->
        <mxCell id="sys-api-call" value="Call&#xa;GETVIEWDATA&#xa;API" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="swimlane-system">
          <mxGeometry x="800" y="40" width="100" height="60" as="geometry" />
        </mxCell>

        <!-- Process: Transform Data -->
        <mxCell id="sys-transform" value="Transform&#xa;DDOTable to&#xa;Circuit Data" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="swimlane-system">
          <mxGeometry x="940" y="40" width="110" height="60" as="geometry" />
        </mxCell>

        <!-- Process: Upsert Circuits -->
        <mxCell id="sys-upsert" value="Upsert Circuits&#xa;(updateOrCreate)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="swimlane-system">
          <mxGeometry x="1090" y="40" width="110" height="60" as="geometry" />
        </mxCell>

        <!-- Process: Create Daily Snapshots -->
        <mxCell id="sys-snapshots" value="Create Daily&#xa;Snapshots&#xa;(non-closed)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="swimlane-system">
          <mxGeometry x="1240" y="110" width="110" height="70" as="geometry" />
        </mxCell>

        <!-- Process: Update Sync Log -->
        <mxCell id="sys-log-end" value="Update SyncLog&#xa;(completed)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="swimlane-system">
          <mxGeometry x="1390" y="110" width="110" height="70" as="geometry" />
        </mxCell>

        <!-- Process: Broadcast Event -->
        <mxCell id="sys-broadcast" value="Broadcast&#xa;SyncCompletedEvent&#xa;(WebSocket)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="swimlane-system">
          <mxGeometry x="1540" y="110" width="130" height="70" as="geometry" />
        </mxCell>

        <!-- Process: UI Refresh -->
        <mxCell id="sys-refresh" value="Client UI&#xa;Auto-Refresh" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="swimlane-system">
          <mxGeometry x="1710" y="120" width="100" height="50" as="geometry" />
        </mxCell>

        <!-- End: Sync Complete -->
        <mxCell id="sys-end" value="Sync&#xa;Complete" style="ellipse;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontStyle=1;" vertex="1" parent="swimlane-system">
          <mxGeometry x="1850" y="115" width="100" height="60" as="geometry" />
        </mxCell>

        <!-- ==================== LEGEND ==================== -->

        <mxCell id="legend-box" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="1300" y="60" width="280" height="180" as="geometry" />
        </mxCell>

        <mxCell id="legend-title" value="LEGEND" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="1390" y="70" width="100" height="30" as="geometry" />
        </mxCell>

        <mxCell id="legend-start" value="Start/End" style="ellipse;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="1320" y="105" width="80" height="35" as="geometry" />
        </mxCell>

        <mxCell id="legend-process" value="User Action" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="1320" y="150" width="80" height="35" as="geometry" />
        </mxCell>

        <mxCell id="legend-decision" value="Decision" style="rhombus;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="1320" y="195" width="80" height="40" as="geometry" />
        </mxCell>

        <mxCell id="legend-system" value="System Action" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="1470" y="105" width="90" height="35" as="geometry" />
        </mxCell>

        <mxCell id="legend-success" value="Success State" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="1470" y="150" width="90" height="35" as="geometry" />
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
